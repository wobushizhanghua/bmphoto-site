<?php

defined('ABSPATH') || die('Access Denied');

class EcommercewdViewReports extends EcommercewdView {
  ////////////////////////////////////////////////////////////////////////////////////////
  // Events                                                                             //
  ////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////
  // Constants                                                                          //
  ////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////
  // Variables                                                                          //
  ////////////////////////////////////////////////////////////////////////////////////////
	public $row_default_currency;
  ////////////////////////////////////////////////////////////////////////////////////////
  // Constructor & Destructor                                                           //
  ////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////
  // Public Methods                                                                     //
  ////////////////////////////////////////////////////////////////////////////////////////

  public function display($tpl = null) {
    ?>
    <div class="wrap">
      <?php
    $model = $this->getModel();
    $model_options = WDFHelper::get_model('options');
    $options = $model_options->get_options();
    $initial_values = $options['initial_values'];

    $decimals = $options['initial_values']['option_show_decimals'] == 1 ? 2 : 0;
    $this->decimals = $decimals;

    $this->report_data = $model->get_report_view_data();
    $this->row_default_currency = $this->report_data->currency;
    $this->_layout = 'default';
    $this->create_toolbar();
    parent::display($tpl);
      ?>
    </div>
    <?php
  }

  ////////////////////////////////////////////////////////////////////////////////////////
  // Getters & Setters                                                                  //
  ////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////
  // Private Methods                                                                    //
  ////////////////////////////////////////////////////////////////////////////////////////
  private function create_toolbar() {
    WDFToolbar::title(__('Reports', 'wde'), 'spidershop_reports.png');
    $where_query = array(" published ='1' AND name='ecommercewd_exportreports'");
    $tools = WDFTool::get_tools($where_query);
  }
}